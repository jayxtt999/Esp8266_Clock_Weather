#include <Arduino.h>
#include <ESP8266WiFi.h>
#include <ESP8266HTTPClient.h>

#include <DNSServer.h>//密码直连将其三个库注释
#include <ESP8266WebServer.h>

#include <CustomWiFiManager.h>

#include <time.h>
#include <sys/time.h>
#include <coredecls.h>


#include "SH1106Wire.h"   //1.3寸用这个
//include "SSD1306Wire.h"    //0.96寸用这个
#include "OLEDDisplayUi.h"
#include "HeFeng.h"
#include "WeatherStationFonts.h"
#include "WeatherStationImages.h"

/***************************
   Begin Settings
 **************************/

const char* WIFI_SSID = "TP-LINK_2E4B50";  //填写你的WIFI名称及密码
const char* WIFI_PWD = "130413041304";

const char* BILIBILIID = "509367343";  //填写你的B站账号

//由于太多人使用我的秘钥，导致获取次数超额，所以不提供秘钥了，大家可以到https://dev.heweather.com/获取免费的
const char* HEFENG_KEY = "59c3745ab5cb4b91b4390f9631c47972";//填写你的和风天气秘钥
const char* HEFENG_LOCATION = "CN101280604";//填写你的城市ID,可到https://where.heweather.com/index.html查询
//const char* HEFENG_LOCATION = "auto_ip";//自动IP定位

#define TZ              8      // 中国时区为8
#define DST_MN          0      // 默认为0

const int UPDATE_INTERVAL_SECS = 5 * 60; // 5分钟更新一次天气
const int UPDATE_CURR_INTERVAL_SECS = 2 * 59; // 2分钟更新一次粉丝数

const int I2C_DISPLAY_ADDRESS = 0x3c;  //I2c地址默认
const int SDA_PIN = 0;  //引脚连接
const int SDC_PIN = 2;  //


const String WDAY_NAMES[] = {"Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"};  //星期
const String MONTH_NAMES[] = {"Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"};  //月份

// web配网页面自定义我的图标请随便使用一个图片转base64工具转换https://tool.css-js.com/base64.html, 64*64
const char Icon[] PROGMEM = "data:image/png;base64,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";
/***************************
   End Settings
 **************************/

SH1106Wire     display(I2C_DISPLAY_ADDRESS, SDA_PIN, SDC_PIN);   // 1.3寸用这个
//SSD1306Wire      display(I2C_DISPLAY_ADDRESS, SDA_PIN, SDC_PIN);   // 0.96寸用这个
OLEDDisplayUi    ui( &display );

HeFengCurrentData currentWeather; //实例化对象
HeFengForeData foreWeather[3];
HeFeng HeFengClient;

#define TZ_MN           ((TZ)*60)   //时间换算
#define TZ_SEC          ((TZ)*3600)
#define DST_SEC         ((DST_MN)*60)

time_t now; //实例化时间

bool readyForWeatherUpdate = false; // 天气更新标志
bool first = true;  //首次更新标志
long timeSinceLastWUpdate = 0;    //上次更新后的时间
long timeSinceLastCurrUpdate = 0;   //上次天气更新后的时间

String fans = "-1"; //粉丝数

void drawProgress(OLEDDisplay *display, int percentage, String label);   //提前声明函数
void updateData(OLEDDisplay *display);
void updateDatas(OLEDDisplay *display);
void drawDateTime(OLEDDisplay *display, OLEDDisplayUiState* state, int16_t x, int16_t y);
void drawCurrentWeather(OLEDDisplay *display, OLEDDisplayUiState* state, int16_t x, int16_t y);
void drawForecast(OLEDDisplay *display, OLEDDisplayUiState* state, int16_t x, int16_t y);
void drawForecastDetails(OLEDDisplay *display, int x, int y, int dayIndex);
void drawHeaderOverlay(OLEDDisplay *display, OLEDDisplayUiState* state);
void setReadyForWeatherUpdate();

//添加框架
//此数组保留指向所有帧的函数指针
//框架是从右向左滑动的单个视图
FrameCallback frames[] = { drawDateTime, drawCurrentWeather, drawForecast };
//页面数量
int numberOfFrames = 3;

OverlayCallback overlays[] = { drawHeaderOverlay }; //覆盖回调函数
int numberOfOverlays = 1;  //覆盖数

void setup() {
  Serial.begin(115200);
  Serial.println();
  Serial.println();

  // 屏幕初始化
  display.init();
  display.clear();
  display.display();
  display.flipScreenVertically(); //屏幕翻转
  display.setContrast(255); //屏幕亮度

  //Web配网，密码直连请注释
  webconnect();

  // 用固定密码连接，Web配网请注释
  //wificonnect();

  ui.setTargetFPS(30);  //刷新频率

  ui.setActiveSymbol(activeSymbole); //设置活动符号
  ui.setInactiveSymbol(inactiveSymbole); //设置非活动符号

  // 符号位置
  // 你可以把这个改成TOP, LEFT, BOTTOM, RIGHT
  ui.setIndicatorPosition(BOTTOM);

  // 定义第一帧在栏中的位置
  ui.setIndicatorDirection(LEFT_RIGHT);

  // 屏幕切换方向
  // 您可以更改使用的屏幕切换方向 SLIDE_LEFT, SLIDE_RIGHT, SLIDE_TOP, SLIDE_DOWN
  ui.setFrameAnimation(SLIDE_LEFT);

  ui.setFrames(frames, numberOfFrames); // 设置框架
  ui.setTimePerFrame(5000); //设置切换时间

  ui.setOverlays(overlays, numberOfOverlays); //设置覆盖

  // UI负责初始化显示
  ui.init();

  //display.flipScreenVertically(); //屏幕反转
  //display.test_debug(); //屏幕反转

  configTime(TZ_SEC, DST_SEC, "ntp.ntsc.ac.cn", "ntp1.aliyun.com"); //ntp获取时间，你也可用其他"pool.ntp.org","0.cn.pool.ntp.org","1.cn.pool.ntp.org","ntp1.aliyun.com"
  delay(200);

}

void loop() {
  if (first) {  //首次加载
    updateDatas(&display);
    first = false;
  }
  if (millis() - timeSinceLastWUpdate > (1000L * UPDATE_INTERVAL_SECS)) { //屏幕刷新
    setReadyForWeatherUpdate();
    timeSinceLastWUpdate = millis();
  }
  if (millis() - timeSinceLastCurrUpdate > (1000L * UPDATE_CURR_INTERVAL_SECS)) { //粉丝数更新
    HeFengClient.fans(&currentWeather, BILIBILIID);
    fans = String(currentWeather.follower);
    timeSinceLastCurrUpdate = millis();
  }

  if (readyForWeatherUpdate && ui.getUiState()->frameState == FIXED) { //天气更新
    updateData(&display);
  }

  int remainingTimeBudget = ui.update(); //剩余时间预算

  if (remainingTimeBudget > 0) {
    //你可以在这里工作如果你低于你的时间预算。
    delay(remainingTimeBudget);
  }
}

void webconnect() {  ////Web配网，密码直连将其注释
  display.clear();
  display.drawXbm(0, 0, 128, 64, naix); //显示哔哩哔哩
  display.display();

  WiFiManager wifiManager;  //实例化WiFiManager
  wifiManager.setDebugOutput(false); //关闭Debug
  //wifiManager.setConnectTimeout(10); //设置超时
  wifiManager.setHeadImgBase64(FPSTR(Icon)); //设置图标
  wifiManager.setPageTitle("请选择你的WIFI并且配置密码");  //设置页标题

  if (!wifiManager.autoConnect("AiNiYa")) {  //AP模式
    Serial.println("连接失败并超时");
    //重新设置并再试一次，或者让它进入深度睡眠状态
    ESP.restart();
    delay(1000);
  }
  Serial.println("connected...^_^");
  yield();
}

void drawProgress(OLEDDisplay *display, int percentage, String label) {    //绘制进度
  display->clear();
  display->setTextAlignment(TEXT_ALIGN_CENTER);
  display->setFont(ArialMT_Plain_10);
  display->drawString(64, 10, label);
  display->drawProgressBar(2, 28, 124, 10, percentage);
  display->display();
}

void updateData(OLEDDisplay *display) {  //天气更新
  HeFengClient.doUpdateCurr(&currentWeather, HEFENG_KEY, HEFENG_LOCATION);
  HeFengClient.doUpdateFore(foreWeather, HEFENG_KEY, HEFENG_LOCATION);
  readyForWeatherUpdate = false;
}

void updateDatas(OLEDDisplay *display) {  //首次天气更新
  drawProgress(display, 0, "Updating fansnumb...");
  HeFengClient.fans(&currentWeather, BILIBILIID);
  fans = String(currentWeather.follower);

  drawProgress(display, 33, "Updating weather...");
  HeFengClient.doUpdateCurr(&currentWeather, HEFENG_KEY, HEFENG_LOCATION);

  drawProgress(display, 66, "Updating forecasts...");
  HeFengClient.doUpdateFore(foreWeather, HEFENG_KEY, HEFENG_LOCATION);

  readyForWeatherUpdate = false;
  drawProgress(display, 100, "Done...");
  delay(200);

}

void drawDateTime(OLEDDisplay *display, OLEDDisplayUiState* state, int16_t x, int16_t y) {  //显示时间
  now = time(nullptr);
  struct tm* timeInfo;
  timeInfo = localtime(&now);
  char buff[16];

  display->setTextAlignment(TEXT_ALIGN_CENTER);
  display->setFont(ArialMT_Plain_16);
  String date = WDAY_NAMES[timeInfo->tm_wday];

  sprintf_P(buff, PSTR("%04d-%02d-%02d  %s"), timeInfo->tm_year + 1900, timeInfo->tm_mon + 1, timeInfo->tm_mday, WDAY_NAMES[timeInfo->tm_wday].c_str());
  display->drawString(64 + x, 5 + y, String(buff));
  display->setFont(ArialMT_Plain_24);

  sprintf_P(buff, PSTR("%02d:%02d:%02d"), timeInfo->tm_hour, timeInfo->tm_min, timeInfo->tm_sec);
  display->drawString(64 + x, 22 + y, String(buff));
  display->setTextAlignment(TEXT_ALIGN_LEFT);
}

void drawCurrentWeather(OLEDDisplay *display, OLEDDisplayUiState* state, int16_t x, int16_t y) {  //显示天气
  display->setFont(ArialMT_Plain_10);
  display->setTextAlignment(TEXT_ALIGN_CENTER);
  display->drawString(64 + x, 38 + y, currentWeather.cond_txt + "    |   Wind: " + currentWeather.wind_sc + "  ");

  display->setFont(ArialMT_Plain_24);
  display->setTextAlignment(TEXT_ALIGN_LEFT);
  String temp = currentWeather.tmp + "°C" ;
  display->drawString(60 + x, 3 + y, temp);
  display->setFont(ArialMT_Plain_10);
  display->drawString(62 + x, 26 + y, currentWeather.fl + "°C | " + currentWeather.hum + "%");
  display->setFont(Meteocons_Plain_36);
  display->setTextAlignment(TEXT_ALIGN_CENTER);
  display->drawString(32 + x, 0 + y, currentWeather.iconMeteoCon);
}

void drawForecast(OLEDDisplay *display, OLEDDisplayUiState* state, int16_t x, int16_t y) {  //天气预报
  drawForecastDetails(display, x, y, 0);
  drawForecastDetails(display, x + 44, y, 1);
  drawForecastDetails(display, x + 88, y, 2);
}

void drawForecastDetails(OLEDDisplay *display, int x, int y, int dayIndex) {  //天气预报

  display->setTextAlignment(TEXT_ALIGN_CENTER);
  display->setFont(ArialMT_Plain_10);
  display->drawString(x + 20, y, foreWeather[dayIndex].datestr);
  display->setFont(Meteocons_Plain_21);
  display->drawString(x + 20, y + 12, foreWeather[dayIndex].iconMeteoCon);

  String temp = foreWeather[dayIndex].tmp_min + " | " + foreWeather[dayIndex].tmp_max;
  display->setFont(ArialMT_Plain_10);
  display->drawString(x + 20, y + 34, temp);
  display->setTextAlignment(TEXT_ALIGN_LEFT);
}

void drawHeaderOverlay(OLEDDisplay *display, OLEDDisplayUiState* state) {   //绘图页眉覆盖
  now = time(nullptr);
  struct tm* timeInfo;
  timeInfo = localtime(&now);
  char buff[14];
  sprintf_P(buff, PSTR("%02d:%02d"), timeInfo->tm_hour, timeInfo->tm_min);

  display->setColor(WHITE);
  display->setFont(ArialMT_Plain_10);
  display->setTextAlignment(TEXT_ALIGN_LEFT);
  display->drawString(6, 54, String(buff));
  display->setTextAlignment(TEXT_ALIGN_RIGHT);
  String temp = fans;
  display->drawString(122, 54, temp);
  display->drawHorizontalLine(0, 52, 128);
}

void setReadyForWeatherUpdate() {  //为天气更新做好准备
  Serial.println("Setting readyForUpdate to true");
  readyForWeatherUpdate = true;
}
